<div id="dialog_2_1" class="full">
  <h1 class="fullsize pad">Where do you want to store it?</h1>
  <table class="fullsize centered">
    <tr>
      <td>
        <button onclick="capture_item_img();">In a Box</button>
      </td>
      <td>
        <button>Individual</button>
      </td>
    </tr>
  </table>
</div>
<div id="image_disp" class="hidden">
<img id="image_ghost" onload="check_size();">
<div id="debug_dom">Debug</div>

<script>

function check_size() {
  console.log($('#image_ghost').width());
  console.log($('#image_ghost').height());
  if (cordova.platformId == "browser") {
    var r_ratio = $('#image_ghost').width() / $('#image_ghost').height();

    if (r_ratio >= 1.0) {
      $("#image_disp").css("width", $(document).width() + "px");
      $("#image_disp").css("max-height", $(document).width() * r_ratio + "px");
    } else {
      $("#image_disp").css("height", $(document).height() + "px");
      $("#image_disp").css("max-width", $(document).height() / r_ratio + "px");
    }
  }
}
var pic_received = function() {
  $("#image_disp").show();
  //$("#image_disp").src =

  //var r_ratio = $('#image_ghost').width();
  /*if (r_ratio <= 1.0) {
    $("#image_disp").css("width", $(document).width() + "px");
    $("#image_disp").css("max-height", $(document).width() * r_ratio + "px");
  } else {
    $("#image_disp").css("height", $(document).height() + "px");
    $("#image_disp").css("max-width", $(document).height() / r_ratio + "px");
  }*/
}

function capture_item_img() {
  $("#dialog_2_1").hide();
  if (cordova.platformId == "browser") {
    capturePhotoWithData("image_disp", pic_received);
  } else {
    capturePhotoWithFile("image_disp", pic_received);
  }
}
</script>
